# Telegram Bot
BOT_TOKEN=your_telegram_bot_token

# GigaChat (https://developers.sber.ru/portal/products/gigachat)
GIGACHAT_CREDENTIALS=your_gigachat_auth_key
GIGACHAT_MODEL=GigaChat
GIGACHAT_SCOPE=GIGACHAT_API_PERS

# MCP Server ВкусВилл
MCP_SERVER_URL=https://mcp001.vkusvill.ru/mcp
# Запуск встроенного MCP-сервера в production (используется deploy.sh)
MCP_SERVER_ENABLED=false
MCP_SERVER_PORT=8081
# API key для HTTP-запросов к локальному MCP-серверу (опционально)
MCP_SERVER_API_KEY=
# Реестр ключей для нескольких клиентов (JSON): {"agent_a":"key1","agent_b":"key2"}
MCP_SERVER_API_KEYS=

# Alice Skill (Yandex Dialogs + Cloud Function)
# Используется в src/vkuswill_bot/alice_skill/handler.py
ALICE_MCP_SERVER_URL=https://mcp001.vkusvill.ru/mcp
ALICE_MCP_API_KEY=
ALICE_SKILL_ID=
ALICE_REQUIRE_LINKED_ACCOUNT=false
ALICE_LINKING_FAIL_CLOSED=true
ALICE_LINK_API_URL=
ALICE_LINK_API_KEY=
ALICE_LINK_API_TIMEOUT_SECONDS=5
ALICE_LINK_API_VERIFY_SSL=true
ALICE_ORDER_RATE_LIMIT=12
ALICE_ORDER_RATE_WINDOW_SECONDS=60
ALICE_LINK_CODE_RATE_LIMIT=6
ALICE_LINK_CODE_RATE_WINDOW_SECONDS=600
# {"alice-user-id": 123456789}
ALICE_ACCOUNT_LINKS_JSON={}
# {"123456": 123456789}
ALICE_LINK_CODES_JSON={}
ALICE_DATABASE_URL=
ALICE_IDEMPOTENCY_TTL_SECONDS=90
ALICE_IDEMPOTENCY_KEY_PREFIX=alice:idem:
ALICE_RATE_LIMIT_KEY_PREFIX=alice:rl:
ALICE_DB_CONNECT_TIMEOUT_SECONDS=3
ALICE_DEGRADE_TO_GUEST_ON_DB_ERROR=false
ALICE_REDIS_URL=
VOICE_LINK_CODE_TTL_MINUTES=10
VOICE_LINK_API_KEY=

# Хранилище предпочтений (SQLite)
DATABASE_PATH=data/preferences.db

# PostgreSQL (управление пользователями)
# Формат: postgresql://user:password@host:port/dbname
DATABASE_URL=
DB_POOL_MIN=2
DB_POOL_MAX=10

# Администраторы (Telegram user ID через запятую)
ADMIN_USER_IDS=[]

# Бэкенд хранилища: "redis" | "memory"
STORAGE_BACKEND=memory

# Redis (опционально)
REDIS_URL=

# Лимиты
MAX_TOOL_CALLS=20
MAX_HISTORY_MESSAGES=50

# Webhook (production — USE_WEBHOOK=true, для разработки оставить false)
USE_WEBHOOK=false
WEBHOOK_HOST=bot.example.com
WEBHOOK_PORT=8080

# S3 логирование (Yandex Object Storage)
# Включить отправку логов в S3 для долгосрочного хранения и анализа
S3_LOG_ENABLED=false
S3_LOG_BUCKET=vkuswill-bot-logs
S3_LOG_PREFIX=logs
S3_LOG_ENDPOINT=https://storage.yandexcloud.net
S3_LOG_REGION=ru-central1
S3_LOG_ACCESS_KEY=
S3_LOG_SECRET_KEY=
S3_LOG_FLUSH_INTERVAL=60
S3_LOG_FLUSH_SIZE=500

# Langfuse (LLM-observability, self-hosted)
# Для локальной разработки: docker compose up → http://localhost:3000
# Для production: секреты через Lockbox, Langfuse контейнер на VM
LANGFUSE_ENABLED=false
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=http://localhost:3000
LANGFUSE_ANONYMIZE_MESSAGES=false

# Системный промпт (переопределение production-промпта через env)
# Если пусто — используется упрощённый дефолтный промпт из prompts.py.
# В production: загрузить полный промпт через Yandex Lockbox.
SYSTEM_PROMPT=

# Debug
DEBUG=false
